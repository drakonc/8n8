version: "3.8"

services:
    n8n:
        image: docker.n8n.io/n8nio/n8n
        restart: always
        environment:
            - N8N_HOST=n8n.jdevelopmen.xyz # ðŸ”¹ tu dominio donde accederÃ¡s
            - N8N_PORT=5678
            - N8N_PROTOCOL=https # usando Traefik global con SSL
            - NODE_ENV=production
            - WEBHOOK_URL=https://n8n.jdevelopmen.xyz/ # URL externa completa
            - GENERIC_TIMEZONE=America/Bogota
        volumes:
            - n8n_data:/home/node/.n8n # datos persistentes
            - ./local-files:/files # tus archivos locales
        labels:
            - "traefik.enable=true"
            - "traefik.http.routers.n8n.rule=Host(`n8n.jdevelopmen.xyz`)"
            - "traefik.http.routers.n8n.entrypoints=websecure"
            - "traefik.http.routers.n8n.tls.certresolver=mytlschallenge"
            - "traefik.http.services.n8n.loadbalancer.server.port=5678"

volumes:
    n8n_data:
